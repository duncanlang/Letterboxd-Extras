<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="options.css">
</head>

<body>
    <div class="logo-holder">
        <div>
            <img class="logo" src="icons/icon128.png" alt="Letterboxd Extras" title="Letterboxd Extras">
        </div>
        <div>
            <h2 class="logotext">Letterboxd Extras Options</h2>
        </div>
        <hr width="100%">
    </div>

    <!-- First Time Setup -->
    <div id="first-time-setup" style="display:none">
        <h4>Thank you for downloading Letterboxd Extras!</h4>
        <h5><b>Please verify these options before closing this tab.</b></h5>
        <hr width="100%">
    </div>
    <!-- Mandatory permissions -->
    <div id="mandatory-permissions-div">
        <h4>Mandatory Permissions</h4>
        <p>To function correctly, Letterboxd Extras requires permission to access Letterboxd and WikiData.</p>
        <input type="button" id="mandatory-permissions" class="request-permission"
            value="Click here to request mandatory permissions" />
        <p style="display: none; color: green">Mandatory permissions have been successfully added!</p>
        <hr width="100%">
    </div>
    <!-- Recommended options (first time setup) -->
    <div id="recommended-options-div" style="display:none">
        <h4>Quick Setup</h4>
        <p>Letterboxd Extras is configurable. For quick setup, click the button here to enable the recommended options.</p>
        <p>The recommended options will enable:</p>
        <ul>
            <li>IMDb ratings</li>
            <li>Rotten Tomatoes ratings</li>
            <li>Metacritic ratings</li>
            <li>MyAnimeList ratings</li>
            <li>AniList ratings</li>
            <li>MPA ratings</li>
            <li>Budget and Box Office</li>
        </ul>
        <input type="button" id="recommended-options" class="request-permission"
            value="Click here to request and enable recommended options" />
        <br>
        <p style="margin-top: 30px">Or, you can keep scrolling and choose your preferred options below:</p>
        <hr width="100%">
    </div>
    <!-- Request missing permissions -->
    <div id="requestalldiv" style="display:none">
        <h4>Permissions</h4>
        <div>
            <p id="permission-warning" style="color: red; display: none;">You are missing some permissions needed for certain enabled settings.</p>
            <p id="permission-notice" style="color: green; display: none;">All required permissions have been granted.</p>
            <input type="button" id="requestall" value="Request Missing Permissions" />
        </div>
        <hr width="100%">
    </div>
    
    <!-- Settings -->
    <div>
        <h4>IMDb</h4>
        <div>
            <label for="imdb-enabled">Display IMDb:</label>
            <input type="checkbox" id="imdb-enabled" class="setting" permission="https://*.imdb.com/*" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="imdb-permissions" class="request-permission"
                permissionTarget="imdb-enabled" value="Request Permission" />
        </div>
    </div>
    <div>
        <h4>MyAnimeList</h4>
        <div>
            <label for="mal-enabled">Display MyAnimeList:</label>
            <input type="checkbox" id="mal-enabled" class="setting" permission="https://api.jikan.moe/*" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="mal-permissions" class="request-permission"
                permissionTarget="mal-enabled" value="Request Permission" />
        </div>
    </div>
    <div>
        <h4>AniList</h4>
        <div>
            <label for="al-enabled">Display AniList:</label>
            <input type="checkbox" id="al-enabled" class="setting" permission="https://graphql.anilist.co/*" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="al-permissions" class="request-permission"
                permissionTarget="al-enabled" value="Request Permission" />
        </div>
    </div>
    <div>
        <h4>Rotten Tomatoes</h4>
        <div>
            <label for="tomato-enabled">Display Rotten Tomatoes:</label>
            <input type="checkbox" id="tomato-enabled" class="setting" subid="tomato-div" permission="https://www.rottentomatoes.com/*" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="tomato-permissions" class="request-permission"
                permissionTarget="tomato-enabled" value="Request Permission" />
        </div>
        <div id="tomato-div">
            <div>
                <label for="tomato-critic-enabled">Display critic ratings:</label>
                <input type="checkbox" id="tomato-critic-enabled" class="setting" />
            </div>
            <div>
                <label for="tomato-audience-enabled">Display audience ratings:</label>
                <input type="checkbox" id="tomato-audience-enabled" class="setting" />
            </div>
            <div>
                <label for="rt-default-view">Default detail view:</label>
                <select id="rt-default-view" class="setting">
                    <option value="hide">Hide</option>
                    <option value="show">Show</option>
                    <option value="remember">Remember Last</option>
                </select>
            </div>
            <div>
                <label for="critic-default">Default critic score:</label>
                <select id="critic-default" class="setting">
                    <option value="all">All Critics</option>
                    <option value="top">Top Critics</option>
                </select>
            </div>
            <div>
                <label for="audience-default">Default audience score:</label>
                <select id="audience-default" class="setting">
                    <option value="all">All Audience</option>
                    <option value="verified">Verified Audience</option>
                </select>
            </div>
        </div>
    </div>
    <div>
        <h4>Metacritic</h4>
        <div>
            <label for="metacritic-enabled">Display Metacritic:</label>
            <input type="checkbox" id="metacritic-enabled" class="setting" subid="meta-div" permission="https://www.metacritic.com/*" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="metacritic-permissions" class="request-permission"
                permissionTarget="metacritic-enabled" value="Request Permission"/>
        </div>
        <div id="meta-div">
            <div>
                <label for="metacritic-critic-enabled">Display critic ratings:</label>
                <input type="checkbox" id="metacritic-critic-enabled" class="setting" />
            </div>
            <div>
                <label for="metacritic-users-enabled">Display user ratings:</label>
                <input type="checkbox" id="metacritic-users-enabled" class="setting" />
            </div>
            <div>
                <label for="metacritic-mustsee-enabled">Display Must-See/Must-Watch:</label>
                <input type="checkbox" id="metacritic-mustsee-enabled" class="setting" />
            </div>
            <div>
                <label for="meta-default-view">Default detail view:</label>
                <select id="meta-default-view" class="setting">
                    <option value="hide">Hide</option>
                    <option value="show">Show</option>
                    <option value="remember">Remember Last</option>
                </select>
            </div>
        </div>
    </div>
    <div>
        <h4>SensCritique</h4>
        <div>
            <label for="senscritique-enabled">Display SensCritique:</label>
            <input type="checkbox" id="senscritique-enabled" permission="https://apollo.senscritique.com/*"
                class="setting" subid="sens-div" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="senscritique-permissions" class="request-permission"
                permissionTarget="senscritique-enabled" value="Request Permission" />
        </div>
        <div id="sens-div" class="disabled">
            <div>
                <label for="sens-favorites-enabled">Display recommended count:</label>
                <input type="checkbox" id="sens-favorites-enabled" class="setting" />
            </div>
        </div>
    </div>
    <div>
        <h4>MUBI</h4>
        <div>
            <label for="mubi-enabled">Display MUBI:</label>
            <input type="checkbox" id="mubi-enabled" permission="https://api.mubi.com/*" class="setting" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="mubi-permissions" class="request-permission" permissionTarget="mubi-enabled"
                value="Request Permission" />
        </div>
    </div>
    <div>
        <h4>FilmAffinity</h4>
        <div>
            <label for="filmaff-enabled">Display FilmAffinity:</label>
            <input type="checkbox" id="filmaff-enabled" permission="https://*.filmaffinity.com/*" class="setting" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="filmaff-permissions" class="request-permission" permissionTarget="filmaff-enabled"
                value="Request Permission" />
        </div>
    </div>
    <div>
        <h4>Simkl</h4>
        <div>
            <label for="simkl-enabled">Display Simkl:</label>
            <input type="checkbox" id="simkl-enabled" permission="https://api.simkl.com/*" class="setting" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="simkl-permissions" class="request-permission" permissionTarget="simkl-enabled"
                value="Request Permission" />
        </div>
    </div>
    <div>
        <h4>AlloCiné</h4>
        <div>
            <label for="allocine-enabled">Display AlloCiné:</label>
            <input type="checkbox" id="allocine-enabled" permission="https://www.allocine.fr/*" subid="allo-div"
                class="setting" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="allocine-permissions" class="request-permission"
                permissionTarget="allocine-enabled" value="Request Permission" />
        </div>
        <div id="allo-div" class="disabled">
            <div>
                <label for="allocine-users-enabled">Display user ratings:</label>
                <input type="checkbox" id="allocine-users-enabled" class="setting" />
            </div>
            <div>
                <label for="allocine-critic-enabled">Display critic ratings:</label>
                <input type="checkbox" id="allocine-critic-enabled" class="setting" />
            </div>
            <div>
                <label for="allocine-style">Display Style:</label>
                <select id="allocine-style" subid="allo-view-div" subidvalue="histogram" class="setting">
                    <option value="histogram">Histogram Graph</option>
                    <option value="ratings">Side-by-side Ratings</option>
                </select>
            </div>
            <div id="allo-view-div">
                <div>
                    <label for="allocine-default-view">Default ratings view:</label>
                    <select id="allocine-default-view" class="setting">
                        <option value="user">User</option>
                        <option value="critic">Critic</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div>
        <h4>CinemaScore</h4>
        <div>
            <label for="cinema-enabled">Display CinemaScore:</label>
            <input type="checkbox" id="cinema-enabled" class="setting" permission="https://webapp.cinemascore.com/*" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="cinema-permissions" class="request-permission"
                permissionTarget="cinema-enabled" value="Request Permission" />
        </div>
    </div>

    <hr width="100%">

    <div>
        <h4>Search</h4>
        <div>
            <label for="search-redirect">Default results to films:</label>
            <input type="checkbox" id="search-redirect" class="setting" />
            <p class="info">Defaults the Letterboxd search to only show results for films, rather than showing all
                results.</p>
        </div>
    </div>

    <hr width="100%">

    <div>
        <h4>Rankings</h4>
        <div>
            <div>
                <label for="tspdt-enabled">Show "They Shoot Pictures, Don't They?" top 1000 rankings:</label>
                <input type="checkbox" id="tspdt-enabled" permission="https://www.theyshootpictures.com/*"
                    class="setting" />
            </div>
            <div class="div-request-permission">
                <label style="color: red;">! Missing Permission !</label>
                <input type="button" id="tspdt-permissions" class="request-permission" permissionTarget="tspdt-enabled"
                    value="Request Permission" />
            </div>
        </div>
        <div>
            <div>
                <label for="bfi-enabled">Show "BFI Sight and Sound" top 250 rankings:</label>
                <input type="checkbox" id="bfi-enabled" permission="https://www.bfi.org.uk/*" class="setting" />
            </div>
            <div class="div-request-permission">
                <label style="color: red;">! Missing Permission !</label>
                <input type="button" id="bfi-permissions" class="request-permission" permissionTarget="bfi-enabled"
                    value="Request Permission" />
            </div>
        </div>
    </div>

    <hr width="100%">

    <div>
        <h4>Budget and Box Office</h4>
        <div>
            <label for="boxoffice-enabled">Display Budget and Box Office in the details tab:</label>
            <input type="checkbox" id="boxoffice-enabled" class="setting" permission="https://www.boxofficemojo.com/*" />
        </div>
        <div>
            <label for="mojo-link-enabled">Add 'More At' link for BoxOfficeMojo:</label>
            <input type="checkbox" id="mojo-link-enabled" class="setting" />
        </div>
    </div>

    <hr width="100%">

    <div>
        <h4>Miscellaneous</h4>
        <div>
            <label for="convert-ratings">Convert ratings:</label>
            <select id="convert-ratings" class="setting">
                <option value="false">Leave unchanged</option>
                <option value="5">5-point scale</option>
                <option value="10">10-point scale</option>
            </select>
            <p class="info">Converts ratings to different rating scales. Affects Letterboxd, IMDb, MyAnimeList, AniList,
                and Mubi.</p>
        </div>
        <div>
            <label for="mpa-enabled">Display MPA film ratings:</label>
            <input type="checkbox" id="mpa-enabled" subid="mpa-div" class="setting" />
        </div>
        <div id="mpa-div">
            <label for="mpa-convert">Convert historical MPA ratings to modern equivalent:</label>
            <input type="checkbox" id="mpa-convert" class="setting" />
        </div>
        <div>
            <label for="open-same-tab">Open 'More At' links in same tab:</label>
            <input type="checkbox" id="open-same-tab" class="setting" />
        </div>
        <div id="wiki-link-div">
            <label for="wiki-link-enabled">Display Wikipedia link:</label>
            <input type="checkbox" id="wiki-link-enabled" />
        </div>
        <div>
            <label for="replace-fans">Replace 'Fans' with Rating Count:</label>
            <select id="replace-fans" class="setting">
                <option value="false">Leave unchanged</option>
                <option value="replace">Replace</option>
                <option value="both">Side-by-side</option>
            </select>
        </div>
        <div>
            <label for="hide-ratings-enabled">Hide additional ratings behind a 'Show More' button:</label>
            <input type="checkbox" id="hide-ratings-enabled" class="setting" />
        </div>
        <div>
            <label for="tooltip-show-details">Display tooltips on page:</label>
            <input type="checkbox" id="tooltip-show-details" class="setting" />
        </div>
    </div>

    <hr width="100%">

    <div>
        <h4>Google Search</h4>
        <div>
            <label for="google">Always display Letterboxd score on Google searches:</label>
            <input type="checkbox" id="google" permission="https://www.google.com/search*"
                contentScript="google2letterboxd.js" contentScriptID="google2letterboxd" class="setting" />
        </div>
        <div class="div-request-permission">
            <label style="color: red;">! Missing Permission !</label>
            <input type="button" id="google-permissions" class="request-permission" permissionTarget="google"
                value="Request Permission" />
        </div>
        <div class="div-request-contentscript">
            <label style="color: red;">! Missing Content Script !</label>
            <input type="button" id="google-contentscripts" class="request-contentscript" permissionTarget="google"
                value="Request Content Script" />
        </div>
    </div>

    <hr width="100%">

    <div>
        <h4>Import/Export Settings</h4>
        <div>
            <input type="button" id="export" value="Export to File" />
        </div>
        <div id="importdivdesktop">
            <input type="button" id="import" value="Import from File" />
            <input type="file" accept="application/json" id="importpicker">
        </div>
        <div id="importdivandroid" style="display:none">
            <input type="button" id="importbutton" value="Import from File" />
            <p class="info">This will open the restore in a separate tab.</p>
            <p id="tabpermissionreminder" class="info">This requires the 'tabs' permission to open the new tab. The
                request pop-up
                will likely open behind this due to a bug with FireFox.</p>
        </div>
        <div>
            <input type="button" id="reset" value="Reset settings to default" />
        </div>
        <div>
            <input type="button" id="resetrecommended" value="Reset settings to recommended" />
        </div>
    </div>

    <hr width="100%">

    <div>
        <h4>Debug</h4>
        <div>
            <label for="console-log">Log calls in console:</label>
            <input type="checkbox" id="console-log" class="setting" />
        </div>
    </div>

    <hr width="100%">

    <div>
        <div>
            <a href="https://github.com/duncanlang/Letterboxd-Extras/issues" target="_blank"
                style="color: rgb(51, 167, 255);">Report an issue or suggest a new feature on GitHub</a>
        </div>
    </div>

    <hr width="100%">

    <script src="options.js"></script>
</body>

</html>